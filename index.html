<html><head><base href="/"><title>Navegador y Buscador Web</title><style>
/* Estilos generales */
* {
  margin: 0;
  padding: 0;
  box-sizing: border-box;
  font-family: Arial, sans-serif;
}

body {
  background: #f0f0f0;
  width: 100%;
  height: 100%;
}

.browser {
  width: 100%;
  height: 100vh;
  display: flex;
  flex-direction: column;
  background: white;
}

/* Barra de navegación */
.navbar {
  background: #f1f3f4;
  padding: 8px;
  display: flex;
  align-items: center;
  gap: 8px;
  border-bottom: 1px solid #dadce0;
  flex-wrap: wrap;
}

.nav-buttons {
  display: flex;
  gap: 8px;
}

.nav-btn {
  width: 36px;
  height: 36px;
  border: none;
  border-radius: 50%;
  background: transparent;
  cursor: pointer;
  display: flex;
  align-items: center;
  justify-content: center;
  touch-action: manipulation;
  transition: background 0.2s;
}

.nav-btn:hover {
  background: #e3e5e7;
}

.nav-btn svg {
  width: 20px;
  height: 20px;
  fill: #5f6368;
}

.search-bar {
  flex: 1;
  min-width: 200px;
  height: 36px;
  background: white;
  border-radius: 18px;
  border: 1px solid #dadce0;
  display: flex;
  align-items: center;
  padding: 0 16px;
  gap: 8px;
  transition: box-shadow 0.2s;
}

.search-bar:focus-within {
  box-shadow: 0 1px 6px rgba(32,33,36,0.28);
  border-color: transparent;
}

.search-bar input {
  flex: 1;
  border: none;
  outline: none;
  font-size: 14px;
  width: 100%;
}

.search-bar svg {
  width: 16px;
  height: 16px;
  fill: #5f6368;
  flex-shrink: 0;
}

/* Área de contenido */
.content {
  flex: 1;
  padding: 20px;
  overflow-y: auto;
  -webkit-overflow-scrolling: touch;
  background: #fff;
}

.search-results {
  animation: fadeIn 0.3s ease-out;
  padding: 20px;
  max-width: 800px;
  margin: 0 auto;
}

.search-results h2 {
  color: #202124;
  font-size: 20px;
  margin-bottom: 20px;
  font-weight: normal;
}

.search-results p {
  color: #5f6368;
  font-size: 16px;
  text-align: center;
}

.result-item {
  display: flex;
  gap: 16px;
  align-items: flex-start;
  margin-bottom: 24px;
  padding: 16px;
  border-radius: 8px;
  transition: all 0.2s ease;
  border: 1px solid transparent;
}

.result-item:hover {
  background: #f8f9fa;
  border-color: #e8eaed;
  transform: translateY(-1px);
  box-shadow: 0 1px 3px rgba(32,33,36,0.1);
}

.result-favicon {
  width: 16px;
  height: 16px;
  flex-shrink: 0;
  margin-top: 4px;
}

.result-content {
  flex: 1;
}

.result-title {
  color: #1a0dab;
  font-size: 18px;
  margin-bottom: 6px;
  text-decoration: none;
  font-weight: 500;
  line-height: 1.3;
  display: block;
  transition: color 0.2s;
}

.result-item:hover .result-title {
  color: #1558d6;
  text-decoration: underline;
}

.result-url {
  color: #0d652d;
  font-size: 14px;
  margin-bottom: 8px;
  word-wrap: break-word;
  display: flex;
  align-items: center;
  gap: 4px;
}

.result-url::before {
  display: none;
}

.result-snippet {
  color: #4d5156;
  font-size: 14px;
  line-height: 1.58;
  word-wrap: break-word;
}

.result-item.ad {
  background: #fafafa;
  border-left: 4px solid #4CAF50;
}

.result-item.ad .result-snippet {
  color: #4CAF50;
  font-weight: 500;
}

/* Pestañas */
.tabs {
  display: flex;
  background: #f1f3f4;
  padding: 0 8px;
  gap: 2px;
  overflow-x: auto;
  scrollbar-width: none;
  -ms-overflow-style: none;
}

.tabs::-webkit-scrollbar {
  display: none;
}

.tab {
  padding: 8px 16px;
  background: #e3e5e7;
  border-radius: 8px 8px 0 0;
  font-size: 12px;
  display: flex;
  align-items: center;
  gap: 8px;
  cursor: pointer;
  white-space: nowrap;
  flex-shrink: 0;
  transition: background 0.2s;
}

.tab.active {
  background: white;
}

.tab svg {
  width: 12px;
  height: 12px;
  fill: #5f6368;
  opacity: 0.8;
  transition: opacity 0.2s;
}

.tab:hover svg {
  opacity: 1;
}

/* Animaciones */
@keyframes fadeIn {
  from { opacity: 0; transform: translateY(10px); }
  to { opacity: 1; transform: translateY(0); }
}

.result-item {
  animation: fadeIn 0.3s ease forwards;
}

/* Media Queries */
@media (max-width: 768px) {
  .navbar {
    padding: 4px;
  }
  
  .search-bar {
    margin: 4px 0;
  }
  
  .nav-btn {
    width: 32px;
    height: 32px;
  }
  
  .result-title {
    font-size: 16px;
  }
  
  .result-url, .result-snippet {
    font-size: 13px;
  }
}

@media (max-width: 480px) {
  .content {
    padding: 10px;
  }
  
  .search-results {
    padding: 0 10px;
  }
  
  .nav-buttons {
    gap: 4px;
  }
  
  .result-item {
    padding: 12px;
    margin-bottom: 16px;
  }
}

/* Ajustes para pantallas táctiles */
@media (pointer: coarse) {
  .nav-btn, .tab {
    min-height: 44px;
    min-width: 44px;
  }
}

/* Nuevos estilos para el menú */

.menu-btn {
  position: relative;
}

.menu-dropdown {
  position: absolute;
  top: 100%;
  right: 0;
  background: white;
  border-radius: 8px;
  box-shadow: 0 2px 10px rgba(0,0,0,0.2);
  min-width: 200px;
  z-index: 1000;
  display: none;
  animation: menuFadeIn 0.2s ease;
}

@keyframes menuFadeIn {
  from {
    opacity: 0;
    transform: translateY(-10px);
  }
  to {
    opacity: 1;
    transform: translateY(0);
  }
}

.menu-dropdown.show {
  display: block;
}

.menu-item {
  padding: 12px 16px;
  display: flex;
  align-items: center;
  gap: 12px;
  cursor: pointer;
  transition: background 0.2s;
  color: #3c4043;
  font-size: 14px;
}

.menu-item:hover {
  background: #f1f3f4;
}

.menu-item svg {
  width: 18px;
  height: 18px;
  fill: #5f6368;
}

.inspector-panel {
  position: fixed;
  right: 0;
  bottom: 0;
  width: 300px;
  height: 50%;
  background: white;
  border-left: 1px solid #dadce0;
  border-top: 1px solid #dadce0;
  display: none;
  flex-direction: column;
  z-index: 1000;
}

.inspector-panel.show {
  display: flex;
}

.inspector-header {
  padding: 8px;
  background: #f1f3f4;
  border-bottom: 1px solid #dadce0;
  display: flex;
  justify-content: space-between;
  align-items: center;
}

.inspector-content {
  flex: 1;
  overflow: auto;
  padding: 16px;
  font-family: monospace;
  white-space: pre-wrap;
  font-size: 13px;
  line-height: 1.5;
  background: #f8f9fa;
}

.homepage {
  max-width: 800px;
  margin: 0 auto;
  padding: 20px;
}

.homepage-header {
  text-align: center;
  margin-bottom: 30px;
}

.homepage-widgets {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
  gap: 20px;
  margin-bottom: 30px;
}

.widget {
  background: white;
  border-radius: 8px;
  padding: 16px;
  box-shadow: 0 1px 3px rgba(0,0,0,0.1);
  border: 1px solid #dadce0;
}

.widget-header {
  display: flex;
  justify-content: space-between;
  align-items: center;
  margin-bottom: 12px;
}

.widget-title {
  font-size: 16px;
  font-weight: 500;
  color: #202124;
}

.settings-panel {
  position: fixed;
  top: 50%;
  left: 50%;
  transform: translate(-50%, -50%);
  background: white;
  border-radius: 8px;
  box-shadow: 0 4px 12px rgba(0,0,0,0.2);
  width: 90%;
  max-width: 500px;
  max-height: 90vh;
  overflow-y: auto;
  z-index: 1001;
  display: none;
  animation: fadeIn 0.2s ease;
}

.settings-panel.show {
  display: block;
}

.settings-header {
  padding: 16px;
  border-bottom: 1px solid #dadce0;
  display: flex;
  justify-content: space-between;
  align-items: center;
}

.settings-content {
  padding: 20px;
}

.settings-section {
  margin-bottom: 24px;
}

.settings-section h3 {
  margin-bottom: 12px;
  color: #202124;
}

.settings-option {
  display: flex;
  align-items: center;
  margin-bottom: 12px;
}

.settings-option input[type="checkbox"] {
  margin-right: 12px;
}

.overlay {
  position: fixed;
  top: 0;
  left: 0;
  right: 0;
  bottom: 0;
  background: rgba(0,0,0,0.5);
  z-index: 1000;
  display: none;
}

.overlay.show {
  display: block;
}
</style></head><body>
<div class="browser">
  <div class="tabs">
    <div class="tab active">
      <span>Nueva Pesta&#xf1;a</span>
      <svg viewBox="0 0 24 24">
        <path d="M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/>
      </svg>
    </div>
  </div>
  
  <div class="navbar">
    <div class="nav-buttons">
      <button class="nav-btn" id="back">
        <svg viewBox="0 0 24 24">
          <path d="M20 11H7.83l5.59-5.59L12 4l-8 8 8 8 1.41-1.41L7.83 13H20v-2z"/>
        </svg>
      </button>
      <button class="nav-btn" id="forward">
        <svg viewBox="0 0 24 24">
          <path d="M12 4l-1.41 1.41L16.17 11H4v2h12.17l-5.58 5.59L12 20l8-8z"/>
        </svg>
      </button>
      <button class="nav-btn" id="reload">
        <svg viewBox="0 0 24 24">
          <path d="M17.65 6.35C16.2 4.9 14.21 4 12 4c-4.42 0-7.99 3.58-7.99 8s3.57 8 7.99 8c3.73 0 6.84-2.55 7.73-6h-2.08c-.82 2.33-3.04 4-5.65 4-3.31 0-6-2.69-6-6s2.69-6 6-6c1.66 0 3.14.69 4.22 1.78L13 11h7V4l-2.35 2.35z"/>
        </svg>
      </button>
      <button class="nav-btn menu-btn" id="menuButton">
        <svg viewBox="0 0 24 24">
          <path d="M12 8c1.1 0 2-.9 2-2s-.9-2-2-2-2 .9-2 2 .9 2 2 2zm0 2c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2zm0 6c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2z"/>
        </svg>
        <div class="menu-dropdown" id="menuDropdown">
          <div class="menu-item" id="inspectButton">
            <svg viewBox="0 0 24 24">
              <path d="M20 4H4c-1.1 0-1.99.9-1.99 2L2 18c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V6c0-1.1-.9-2-2-2zm-1 14H5c-.55 0-1-.45-1-1V7c0-.55.45-1 1-1h14c.55 0 1 .45 1 1v10c0 .55-.45 1-1 1z"/>
            </svg>
            Inspeccionar
          </div>
          <div class="menu-item">
            <svg viewBox="0 0 24 24">
              <path d="M19.14 12.94c.04-.3.06-.61.06-.94 0-.32-.02-.64-.07-.94l2.03-1.58c.18-.14.23-.41.12-.61l-1.92-3.32c-.12-.22-.37-.29-.59-.22l-2.39.96c-.5-.38-1.03-.7-1.62-.94l-.36-2.54c-.04-.24-.24-.41-.48-.41h-3.84c-.24 0-.43.17-.47.41l-.36 2.54c-.59.24-1.13.57-1.62.94l-2.39-.96c-.22-.08-.47 0-.59.22L2.74 8.87c-.12.21-.08.47.12.61l2.03 1.58c-.05.3-.09.63-.09.94s.02.64.07.94l-2.03 1.58c-.18.14-.23.41-.12.61l1.92 3.32c.12.22.37.29.59.22l2.39-.96c.5.38 1.03.7 1.62.94l.36 2.54c.05.24.24.41.48.41h3.84c.24 0 .44-.17.47-.41l.36-2.54c.59-.24 1.13-.56 1.62-.94l2.39.96c.22.08.47 0 .59-.22l1.92-3.32c.12-.22.07-.47-.12-.61l-2.01-1.58zM12 15.6c-1.98 0-3.6-1.62-3.6-3.6s1.62-3.6 3.6-3.6 3.6 1.62 3.6 3.6-1.62 3.6-3.6 3.6z"/>
            </svg>
            Configuraci&#xf3;n
          </div>
        </div>
      </button>
    </div>
    
    <div class="search-bar">
      <svg viewBox="0 0 24 24">
        <path d="M15.5 14h-.79l-.28-.27C15.41 12.59 16 11.11 16 9.5 16 5.91 13.09 3 9.5 3S3 5.91 3 9.5 5.91 16 9.5 16c1.61 0 3.09-.59 4.23-1.57l.27.28v.79l5 4.99L20.49 19l-4.99-5zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5 14 7.01 14 9.5 11.99 14 9.5 14z"/>
      </svg>
      <input type="text" placeholder="Buscar o escribir direcci&#xf3;n web" id="urlInput">
    </div>
  </div>
  
  <div class="content" id="contentArea">
    <div class="homepage">
      <div class="homepage-header">
        <h1>Bienvenido a tu navegador</h1>
      </div>
      <div class="homepage-widgets">
        <div class="widget" id="bookmarks">
          <div class="widget-header">
            <span class="widget-title">Marcadores</span>
          </div>
          <div class="widget-content">
            <p>Tus sitios favoritos aparecer&#xe1;n aqu&#xed;</p>
          </div>
        </div>
        <div class="widget" id="topSites">
          <div class="widget-header">
            <span class="widget-title">Sitios m&#xe1;s visitados</span>
          </div>
          <div class="widget-content">
            <p>Los sitios que m&#xe1;s visitas aparecer&#xe1;n aqu&#xed;</p>
          </div>
        </div>
        <div class="widget" id="news">
          <div class="widget-header">
            <span class="widget-title">Noticias</span>
          </div>
          <div class="widget-content">
            <p>Las &#xfa;ltimas noticias aparecer&#xe1;n aqu&#xed;</p>
          </div>
        </div>
      </div>
    </div>
  </div>

  <div class="inspector-panel" id="inspectorPanel">
    <div class="inspector-header">
      <span>Inspector</span>
      <button class="nav-btn" id="closeInspector">
        <svg viewBox="0 0 24 24">
          <path d="M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/>
        </svg>
      </button>
    </div>
    <div class="inspector-content" id="inspectorContent"></div>
  </div>

  <div class="overlay" id="settingsOverlay">
    <div class="settings-panel" id="settingsPanel">
      <div class="settings-header">
        <h2>Configuraci&#xf3;n</h2>
        <button class="nav-btn" id="closeSettings">
          <svg viewBox="0 0 24 24">
            <path d="M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/>
          </svg>
        </button>
      </div>
      <div class="settings-content">
        <div class="settings-section">
          <h3>P&#xe1;gina de inicio</h3>
          <div class="settings-option">
            <input type="checkbox" id="showBookmarks" checked>
            <label for="showBookmarks">Mostrar marcadores</label>
          </div>
          <div class="settings-option">
            <input type="checkbox" id="showTopSites" checked>
            <label for="showTopSites">Mostrar sitios m&#xe1;s visitados</label>
          </div>
          <div class="settings-option">
            <input type="checkbox" id="showNews" checked>
            <label for="showNews">Mostrar noticias</label>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>

<script>
alert("Sw elimino la api key por seguridad del codigo abierto")
  
  const API_KEY = 'aqui tu api key';
const SEARCH_ENGINE_ID = '675645433c29a4715';
const urlInput = document.getElementById('urlInput');
const contentArea = document.getElementById('contentArea');
const searchResults = document.getElementById('searchResults');
const backBtn = document.getElementById('back');
const forwardBtn = document.getElementById('forward');
const reloadBtn = document.getElementById('reload');
const menuButton = document.getElementById('menuButton');
const menuDropdown = document.getElementById('menuDropdown');
const inspectButton = document.getElementById('inspectButton');
const inspectorPanel = document.getElementById('inspectorPanel');
const closeInspector = document.getElementById('closeInspector');
const inspectorContent = document.getElementById('inspectorContent');
let history = [];
let currentIndex = -1;
let homepageSettings = {
  showBookmarks: true,
  showTopSites: true,
  showNews: true
};
const ADS_URL = 'https://octavioproyt456.github.io/Navegador/ads.json';
let cachedAds = null;
function generateHomepage(settings) {
  return `
    <div class="homepage">
      <div class="homepage-header">
        <h1>Bienvenido a tu navegador</h1>
      </div>
      <div class="homepage-widgets">
        ${settings.showBookmarks ? `
          <div class="widget" id="bookmarks">
            <div class="widget-header">
              <span class="widget-title">Marcadores</span>
            </div>
            <div class="widget-content">
              <p>Tus sitios favoritos aparecerán aquí</p>
            </div>
          </div>
        ` : ''}
        
        ${settings.showTopSites ? `
          <div class="widget" id="topSites">
            <div class="widget-header">
              <span class="widget-title">Sitios más visitados</span>
            </div>
            <div class="widget-content">
              <p>Los sitios que más visitas aparecerán aquí</p>
            </div>
          </div>
        ` : ''}
        
        ${settings.showNews ? `
          <div class="widget" id="news">
            <div class="widget-header">
              <span class="widget-title">Noticias</span>
            </div>
            <div class="widget-content">
              <p>Las últimas noticias aparecerán aquí</p>
            </div>
          </div>
        ` : ''}
      </div>
    </div>
  `;
}
function showHomepage() {
  contentArea.innerHTML = generateHomepage(homepageSettings);
}
function saveSettings() {
  localStorage.setItem('homepageSettings', JSON.stringify(homepageSettings));
  showHomepage();
}
const savedSettings = localStorage.getItem('homepageSettings');
if (savedSettings) {}
showHomepage();
document.querySelectorAll('.menu-item').forEach(item => {
  if (item.textContent.trim() === 'Configuración') {
    item.addEventListener('click', () => {
      document.getElementById('settingsOverlay').classList.add('show');
      document.getElementById('settingsPanel').classList.add('show');
      menuDropdown.classList.remove('show');
      Object.keys(homepageSettings).forEach(key => {
        document.getElementById(key).checked = homepageSettings[key];
      });
    });
  }
});
document.getElementById('closeSettings').addEventListener('click', () => {
  document.getElementById('settingsOverlay').classList.remove('show');
  document.getElementById('settingsPanel').classList.remove('show');
});
document.querySelectorAll('.settings-option input[type="checkbox"]').forEach(checkbox => {
  checkbox.addEventListener('change', () => {
    homepageSettings[checkbox.id] = checkbox.checked;
    saveSettings();
  });
});
function displaySearchResults(results) {
  const searchResults = document.getElementById('searchResults');
  searchResults.innerHTML = '<h2>Resultados de la búsqueda</h2>';
  results.forEach((result, index) => {
    const resultItem = document.createElement('div');
    resultItem.className = 'result-item';
    resultItem.style.animationDelay = `${index * 0.1}s`;
    const favicon = `https://www.google.com/s2/favicons?domain=${encodeURIComponent(result.link)}`;
    resultItem.innerHTML = `
      <img src="${favicon}" class="result-favicon" alt="Site icon">
      <div class="result-content">
        <a href="${result.link}" class="result-title" target="_blank">${result.title}</a>
        <div class="result-url">${result.link}</div>
        <div class="result-snippet">${result.snippet}</div>
      </div>
    `;
    resultItem.addEventListener('click', e => {
      if (!e.target.classList.contains('result-title')) {
        navigateToUrl(result.link);
      }
    });
    searchResults.appendChild(resultItem);
  });
}
function navigateToUrl(url) {
  try {
    const iframe = document.createElement('iframe');
    iframe.className = 'content';
    iframe.style = 'width:100%;height:100%;border:none;';
    iframe.src = url;
    iframe.onerror = () => {
      showErrorAlert('La página web rechazó la conexión');
    };
    contentArea.innerHTML = '';
    contentArea.appendChild(iframe);
    history.splice(currentIndex + 1);
    history.push(url);
    currentIndex = history.length - 1;
    urlInput.value = url;
  } catch (error) {
    console.error('Error al navegar:', error);
    showErrorAlert('La página web rechazó la conexión');
  }
}
async function performSearch(query) {
  const searchUrl = `https://www.googleapis.com/customsearch/v1?key=${API_KEY}&cx=${SEARCH_ENGINE_ID}&q=${encodeURIComponent(query)}`;
  try {
    const [searchResponse, ads] = await Promise.all([fetch(searchUrl), fetchAds()]);
    if (!searchResponse.ok) {
      throw new Error('Error en la búsqueda');
    }
    const data = await searchResponse.json();
    if (data.items && data.items.length > 0) {
      contentArea.innerHTML = '<div class="search-results" id="searchResults"></div>';
      const searchResults = document.getElementById('searchResults');
      if (ads) {
        const randomAds = getRandomAds(ads);
        const adsHtml = randomAds.map(ad => `
          <div class="result-item ad">
            <img src="https://www.google.com/s2/favicons?domain=${encodeURIComponent(ad.url)}" class="result-favicon" alt="Ad icon">
            <div class="result-content">
              <a href="${ad.url}" class="result-title" target="_blank">${ad.title}</a>
              <div class="result-url">${ad.url}</div>
              <div class="result-snippet">Anuncio</div>
            </div>
          </div>
        `).join('');
        searchResults.insertAdjacentHTML('afterbegin', adsHtml);
      }
      displaySearchResults(data.items);
      history.splice(currentIndex + 1);
      history.push(`?search=${query}`);
      currentIndex = history.length - 1;
    } else {
      contentArea.innerHTML = `
        <div class="search-results">
          <h2>No se encontraron resultados</h2>
          <p>Intenta con otra búsqueda</p>
        </div>
      `;
    }
  } catch (error) {
    console.error('Error en la búsqueda:', error);
    showErrorAlert('No se pudo realizar la búsqueda. Intenta nuevamente.');
  }
}
function showErrorAlert(message) {
  alert(message);
  showHomepage();
  urlInput.value = '';
}
urlInput.addEventListener('keypress', e => {
  if (e.key === 'Enter') {
    let url = urlInput.value;
    if (!url.includes('.') || url.includes(' ')) {
      performSearch(url);
    } else {
      if (!url.startsWith('http://') && !url.startsWith('https://')) {
        url = 'https://' + url;
      }
      navigateToUrl(url);
    }
  }
});
backBtn.addEventListener('click', () => {
  if (currentIndex > 0) {
    currentIndex--;
    const url = history[currentIndex];
    if (url.startsWith('?search=')) {
      performSearch(url.substring(8));
    } else {
      navigateToUrl(url);
    }
  }
});
forwardBtn.addEventListener('click', () => {
  if (currentIndex < history.length - 1) {
    currentIndex++;
    const url = history[currentIndex];
    if (url.startsWith('?search=')) {
      performSearch(url.substring(8));
    } else {
      navigateToUrl(url);
    }
  }
});
reloadBtn.addEventListener('click', () => {
  const currentUrl = history[currentIndex];
  if (!currentUrl) {
    showHomepage();
  } else if (currentUrl.startsWith('?search=')) {
    performSearch(currentUrl.substring(8));
  } else {
    navigateToUrl(currentUrl);
  }
});
document.querySelector('.tab').addEventListener('click', e => {
  if (e.target.tagName === 'svg' || e.target.tagName === 'path') {
    if (document.querySelectorAll('.tab').length > 1) {
      e.target.closest('.tab').remove();
    }
  }
});
menuButton.addEventListener('click', e => {
  e.stopPropagation();
  menuDropdown.classList.toggle('show');
});
document.addEventListener('click', e => {
  if (!menuDropdown.contains(e.target)) {
    menuDropdown.classList.remove('show');
  }
});
inspectButton.addEventListener('click', () => {
  menuDropdown.classList.remove('show');
  inspectorPanel.classList.add('show');
  const iframe = contentArea.querySelector('iframe');
  if (iframe) {
    try {
      const iframeDoc = iframe.contentDocument || iframe.contentWindow.document;
      inspectorContent.textContent = iframeDoc.documentElement.outerHTML;
    } catch (e) {
      inspectorContent.textContent = 'No se puede acceder al contenido de la página por restricciones de seguridad.';
    }
  } else {
    inspectorContent.textContent = contentArea.innerHTML;
  }
});
closeInspector.addEventListener('click', () => {
  inspectorPanel.classList.remove('show');
});
window.addEventListener('popstate', e => {
  if (e.state) {
    const url = e.state.url;
    if (url.startsWith('?search=')) {
      performSearch(url.substring(8));
    } else {
      navigateToUrl(url);
    }
  }
});
function adjustHeight() {
  const vh = window.innerHeight * 0.01;
  document.documentElement.style.setProperty('--vh', `${vh}px`);
}
window.addEventListener('resize', adjustHeight);
adjustHeight();
document.addEventListener('touchend', e => {
  e.preventDefault();
  const target = e.target;
  if (target.tagName === 'INPUT' || target.tagName === 'TEXTAREA') {
    return;
  }
}, {
  passive: false
});
async function fetchAds() {
  if (cachedAds) return cachedAds;
  try {
    const response = await fetch(ADS_URL);
    if (!response.ok) throw new Error('Failed to fetch ads');
    const ads = await response.json();
    cachedAds = ads;
    return ads;
  } catch (error) {
    console.error('Error fetching ads:', error);
    return null;
  }
}
function getRandomAds(ads) {
  if (!ads) return [];
  const adKeys = Object.keys(ads);
  const shuffled = adKeys.sort(() => 0.5 - Math.random());
  return shuffled.slice(0, 3).map(key => ads[key]);
}</script>
</body></html>
